import{a5 as x,n as t,p as a,u as p,lk as f,bi as L,gG as b,gb as m,ms as g,gH as w,ah as S,q as v}from"./index-__5qT7pg.js";import{c as E}from"./SlicePlane-DCa16sL7.js";let r=class extends x{constructor(e){super(e),this.layerId=""}static fromLayer(e){return new this({layerId:e.type==="building-component"?e.layer.id:e.id,sublayerId:e.type==="building-component"?e.id:void 0})}};t([a({type:String,json:{write:{isRequired:!0}}})],r.prototype,"layerId",void 0),t([a({type:Number,json:{write:!0}})],r.prototype,"sublayerId",void 0),r=t([p("esri.analysis.support.SliceAnalysisExcludedLayer")],r);let s=class extends f{constructor(e){super(e),this.type="slice",this.tiltEnabled=!1,this.shape=null,this.excludeGroundSurface=!1}get excludedLayers(){return this._get("excludedLayers")||new L}set excludedLayers(e){this._set("excludedLayers",b(e,this._get("excludedLayers")))}writeExcludedLayers(e,n,d,o){e.length!==0&&(n[d]=e.toArray().map(u=>r.fromLayer(u).toJSON(o)))}readExcludedLayers(e,n,d){const o=d?.initiator;o&&d?.hooks?.onAfterLoad(async()=>{for(const u of e){const{layerId:c,sublayerId:y}=r.fromJSON(u,d),i=o.allLayers.find(({id:l})=>l===c);if(i)if(y!=null&&"allSublayers"in i){await i.load();const l=i.allSublayers.find(({id:h})=>h===y);l&&"type"in l&&l.type==="building-component"&&this.excludedLayers.add(l)}else this.excludedLayers.add(i)}})}get valid(){return this.shape?.position!=null}equals(e){return this===e||super.equals(e)&&m(this.shape,e.shape)&&this.tiltEnabled===e.tiltEnabled&&g(this.excludedLayers.toArray(),e.excludedLayers.toArray())&&this.excludeGroundSurface===e.excludeGroundSurface}clear(){this.shape=null}};t([a({type:["slice"],json:{read:!1,write:{isRequired:!0}}})],s.prototype,"type",void 0),t([a({type:Boolean,nonNullable:!0,json:{write:!0,default:!1}})],s.prototype,"tiltEnabled",void 0),t([a({types:{key:"type",base:null,typeMap:{plane:E},defaultKeyValue:"plane"},json:{write:{isRequired:!0}}})],s.prototype,"shape",void 0),t([a({cast:w,clonable:e=>e.slice(),json:{type:[r],write:!0}})],s.prototype,"excludedLayers",null),t([S("excludedLayers")],s.prototype,"writeExcludedLayers",null),t([v("excludedLayers")],s.prototype,"readExcludedLayers",null),t([a({type:Boolean,nonNullable:!0,json:{write:!0}})],s.prototype,"excludeGroundSurface",void 0),t([a({readOnly:!0})],s.prototype,"valid",null),s=t([p("esri.analysis.SliceAnalysis")],s);const q=s;export{q as default};
